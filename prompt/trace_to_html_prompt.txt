# Trace to HTML Visualization Prompt

## Task
You are tasked with creating a clean, professional HTML visualization from a symbolic reasoning solver trace. Transform the technical trace output into an engaging, educational webpage that helps users understand how the solver arrived at its answer.

## Input
You will receive:
1. **Problem description** (natural language)
2. **Solver trace** including:
   - Generated formal code (e.g., Prover9, Pyke, MiniZinc, Z3)
   - Solver output/results
   - Any intermediate derivations or reasoning steps
3. **Problem type** (e.g., FOL, LP, CSP, SMT)
4. **Final answer** (if applicable)

## Output Requirements

### 1. HTML Structure
Create a single, self-contained HTML file with:
- Modern, clean design with dark theme
- Responsive layout
- Clear visual hierarchy
- Embedded CSS (no external dependencies except Google Fonts)
- Semantic HTML5 markup

### 2. Design Guidelines

**Color Scheme** (use these CSS variables):
```css
--bg: #0b1220 (background)
--panel: #111a2b (card backgrounds)
--ink: #e8eefc (primary text)
--sub: #9fb3d9 (secondary text)
--accent: #7cc4ff (highlights/links)
--accent-2: #b892ff (secondary accent)
--ok: #4ade80 (success/positive)
--bad: #fb7185 (error/negative)
--code: #0f172a (code backgrounds)
```

**Typography**:
- Font: Inter (from Google Fonts)
- Monospace font for code: ui-monospace, SF Mono, Menlo, Monaco, Consolas

**Components to include**:
- Header with title and solver information
- Result summary card (prominently displayed)
- Problem description section
- Generated formal code (in syntax-highlighted pre blocks)
- Derivation steps or reasoning process
- Visual elements (diagrams if helpful, but clearly mark as interpretations)
- Constraint verification (if applicable)

### 3. Content Guidelines

**DO:**
- Extract ALL relevant information from the trace
- Present the problem in natural language first
- Show the generated formal code prominently
- Explain key steps in the reasoning process
- Use visual aids (boxes, colors, badges) to highlight important elements
- Create clear section headings
- Use tables for structured data
- Add metadata chips (problem type, solver name, result)
- Include verification steps that show constraints are satisfied

**DO NOT:**
- Invent information not present in the trace
- Hide or omit the formal code
- Make claims about correctness without showing the formal guarantee
- Create complex diagrams that might misrepresent the formal reasoning
- Use overly technical jargon without explanation

**When adding interpretations** (diagrams, explanations, simplifications):
- Clearly label them as interpretations or explanations
- State: "Note: This is a natural language interpretation. The formal guarantee comes from the executed code above."
- Use callout boxes with dashed borders to distinguish interpretations from facts

### 4. Sections to Include

#### A. Header
- Title describing the problem
- Subtitle with solver information (e.g., "Engine: csp_solver (MiniZinc)")
- Optional logo/icon element

#### B. Result Summary
- Final answer prominently displayed
- Status indicator (success/failure/satisfied/unsatisfied)
- Key metrics (e.g., number of constraints, variables, solutions found)

#### C. Problem Description
- Natural language description of the problem
- Input facts/data in readable format
- Rules or constraints in plain language

#### D. Formal Code
- Complete generated code (Prover9, Pyke, MiniZinc, Z3, etc.)
- Syntax highlighted
- Comments preserved or added to explain sections
- Label: "Generated [Language] Code"

#### E. Reasoning Process
Depending on problem type:
- **FOL**: Proof steps, axioms applied, derived conclusions
- **LP**: Forward chaining derivation, fact propagation
- **CSP**: Constraint encoding, variable domains, search process
- **SMT**: Assertions, satisfiability check, model (if SAT)

#### F. Solution/Answer
- Final result clearly stated
- If applicable: variable assignments, truth values, proof confirmation
- Verification that all constraints are satisfied

#### G. Explanation (Optional)
- Natural language walkthrough
- "At a Glance" summary
- Visual diagrams (clearly marked as interpretations)

### 5. Visual Elements

**Use these UI components**:

**Pills/Badges** for status:
```html
<span class="pill ok">✓ SATISFIED</span>
<span class="pill no">✗ NOT CREDENTIALED</span>
```

**Chips** for metadata:
```html
<span class="chip"><span class="k">Solver:</span> <span class="v mono">lp_solver</span></span>
```

**Callout boxes** for important notes:
```html
<div class="callout">
  <strong>Reasoning Type:</strong> First-Order Logic (FOL)<br>
  <strong>Answer:</strong> YES — Patient satisfies discharge criteria.
</div>
```

**Color-coded cards** for different problem types:
- CSP: Purple gradient (#667eea to #764ba2)
- FOL: Pink gradient (#f093fb to #f5576c)
- LP: Blue gradient (#4facfe to #00f2fe)
- SMT: Similar purple/blue tones

### 6. Example Structure

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>[Problem Title] — [Solver] Trace</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    /* CSS variables and styling */
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo"></div>
      <h1>[Problem Title]</h1>
      <div class="subtitle">Engine: <span class="mono">[solver_name]</span></div>
    </header>

    <!-- Result Summary -->
    <section class="grid">
      <div class="card">
        <h2>Result</h2>
        [Status, answer, key findings]
      </div>
    </section>

    <!-- Problem Description -->
    <section class="grid">
      <div class="card">
        <h2>Problem Description</h2>
        [Natural language problem]
      </div>
    </section>

    <!-- Generated Code -->
    <section class="grid">
      <div class="card">
        <h2>Generated [Language] Code</h2>
        <pre>[Formal code here]</pre>
      </div>
    </section>

    <!-- Reasoning Process -->
    <section class="grid">
      <div class="card">
        <h2>Reasoning Process</h2>
        [Derivation steps, proof, or solution process]
      </div>
    </section>

    <!-- Verification -->
    <section class="grid">
      <div class="card">
        <h2>Solution Verification</h2>
        [Check that constraints are satisfied]
      </div>
    </section>

    <footer>Generated visualization of symbolic reasoning trace</footer>
  </div>
</body>
</html>
```

### 7. Key Principles

1. **Formal Validity First**: The advantage of symbolic reasoning is formal correctness. Always show the formal code that was executed.

2. **Transparency**: Make it clear what comes from the solver vs. what is your interpretation.

3. **Educational Value**: Help the user understand not just the answer, but HOW the solver arrived at it.

4. **Visual Clarity**: Use consistent colors, spacing, and typography. Make important information easy to find.

5. **Completeness**: Don't hide information. If the trace contains it, present it (perhaps in a collapsible section if very long).

6. **Accuracy**: Never fabricate results, steps, or explanations. If you don't have information, say so or omit that section.

### 8. Special Notes for Different Problem Types

**For CSP (Constraint Satisfaction Problems)**:
- Show all constraints clearly
- Display variable assignments in a table or structured format
- Verify each constraint is satisfied in the solution
- Show capacity/resource usage if applicable

**For FOL (First-Order Logic)**:
- Present axioms/premises clearly
- Show proof steps in logical order
- Use logical notation (∀, ∃, ⇒, ∧, ∨, ¬)
- Display the goal/hypothesis
- Show which rules were applied

**For LP (Logic Programming)**:
- Show facts vs. rules
- Display forward chaining derivation steps
- Use arrow notation (→) for implications
- Create derivation graph if helpful
- Show intermediate predicates derived

**For SMT (Satisfiability Modulo Theories)**:
- Show all assertions/constraints
- Display the satisfiability result (SAT/UNSAT)
- If SAT, show the model (variable assignments)
- Explain the theory (arithmetic, bitvectors, etc.)

### 9. Quality Checklist

Before finalizing, ensure:
- [ ] All information from the trace is included
- [ ] Formal code is displayed completely and correctly
- [ ] Answer/result is prominently shown
- [ ] Visual design is consistent and professional
- [ ] No information is invented or hallucinated
- [ ] Interpretations are clearly labeled as such
- [ ] HTML is valid and self-contained
- [ ] Layout is responsive (works on mobile)
- [ ] Code blocks are readable with proper formatting
- [ ] Colors and contrast meet accessibility standards

### 10. Example Usage Pattern

```
Input:
- Problem: "Is patient cleared for discharge?"
- Trace: [Pyke LP solver output with rules and derivations]
- Result: True

Output:
- Clean HTML page showing:
  * Problem statement
  * Discharge protocol rules
  * Patient status facts
  * Generated Pyke code
  * Derivation chain showing how "cleared_for_discharge" was proved
  * Final answer: YES, patient is cleared
```

## Final Note

Remember: The formal code execution provides the epistemic guarantee. Your HTML visualization should make this guarantee visible and understandable, not replace it with potentially error-prone interpretations. When in doubt, show the formal trace and let it speak for itself.
